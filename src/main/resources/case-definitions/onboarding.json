{
  "$id": "onboarding-case",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Retail Onboarding Case",
  "version": 1,
  "type": "object",
  "properties": {
    "caseId": {
      "type": "string",
      "description": "Unique case identifier"
    },
    "productSelection": {
      "title": "Product selection data",
      "$ref": "#/definitions/productSelection"
    },
    "mainApplicant": {
      "$ref": "#/definitions/applicant"
    },
    "isJointAccount": {
      "type": "boolean",
      "description": "Boolean flag to determine if it is an individual account or a joint account",
      "default": false
    },
    "coApplicant": {
      "$ref": "#/definitions/applicant"
    },
    "onboardingStatus": {
      "type": "string",
      "enum": ["INITIALIZED", "DATA_GATHERING", "VERIFICATION", "ACCOUNT_CREATION", "COMPLETED", "FAILED"],
      "default": "INITIALIZED"
    },
    "kycStatus": {
      "type": "string",
      "enum": ["PENDING", "APPROVED", "REJECTED", "MANUAL_REVIEW"],
      "default": "PENDING"
    },
    "amlStatus": {
      "type": "string",
      "enum": ["PENDING", "PASSED", "FAILED", "REVIEW_NEEDED"],
      "default": "PENDING"
    }
  },
  "required": ["caseId", "mainApplicant"],
  "definitions": {
    "applicant": {
      "type": "object",
      "properties": {
        "applicantId": {
          "type": "string"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "dateOfBirth": {
          "type": "string",
          "format": "date"
        },
        "phoneNumber": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "idNumber": {
          "type": "string"
        },
        "address": {
          "$ref": "#/definitions/address"
        },
        "citizenship": {
          "$ref": "#/definitions/citizenshipInfo"
        }
      },
      "required": ["firstName", "lastName", "dateOfBirth", "phoneNumber", "email", "idNumber"]
    },
    "address": {
      "type": "object",
      "properties": {
        "street": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "state": {
          "type": "string"
        },
        "zipCode": {
          "type": "string"
        },
        "country": {
          "type": "string"
        }
      }
    },
    "citizenshipInfo": {
      "type": "object",
      "properties": {
        "citizenshipType": {
          "type": "string",
          "enum": ["US_CITIZEN", "PERMANENT_RESIDENT", "NON_RESIDENT_ALIEN"]
        },
        "countryCode": {
          "type": "string"
        }
      }
    },
    "productSelection": {
      "type": "object",
      "properties": {
        "selectedProducts": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "productId": {
                "type": "string"
              },
              "productName": {
                "type": "string"
              },
              "quantity": {
                "type": "integer",
                "minimum": 1
              }
            }
          }
        }
      }
    }
  },
  "additionalProperties": false
}
